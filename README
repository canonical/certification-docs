=========================================
 Server Certification Team Documentation
=========================================

Overview
========

This directory contains documentation for the Server Certification team in
reStructuredText format. Specific documents are:

* MAAS_Advanced_NUC_Installation_And_Configuration.rst -- The MANIAC
  document
* MAAS_Advanced_NUC_Installation_And_Configuration_Scripted.rst -- The
  MANIACS (MANIAC - Scripted) document
* Self-Test_Guide.rst -- The Server Self-Test Guide

Support files and directories are:

* Makefile -- A Makefile to generate .pdf and .html files from the .rst
  files.
* images/ -- A subdirectory holding images. Note that some images are
  stored in both source form (.fig, .xcf, etc.) and the .png files that are
  mostly referenced in the .rst files.
* styles/ -- Style files used in generating PDFs. Currently has just one
  style.

Converting from .rst to .pdf form requires the ``rst2pdf`` package::

  sudo apt-get install rst2pdf

Test Case Guide
===============

The Test Case Guide is a special case that requires some extra manual effort.

Test Case Guide creation uses the mk-test-case-guide script found in the source
for certification-docs.

Before using mk-test-case-guide, you will need to install the Python 3
Guacamole libs:

 sudo apt-get install python3-guacamole

To use the script, you will also need the source for checkbox (for the job
files) and the whitelist you wish to use to build the guide from.

Execute the script like this (ex. 16.04 Test Case Guide):

 $ mk-test-case-guide -w path/to/whitelist -j path/to/jobs dir --preamble
 testcase-preample.rst --output Test_Case_Guide_16.04.rst

To build the Test Case Guide alone, once you've created the RST file, simply:

    make testcase

Creating HTML and PDF Files
===========================

PDFs and HTML files can be generated by way of the ``make`` utility, as
in::

    make stg

This example builds the Self-Test Guide in PDF form. The complete set of
targets are:

* ``stg`` -- Builds the Self-Test Guide as a PDF
* ``maniac`` -- Builds the MANIAC document as a PDF
* ``maniacs`` -- Builds the MANIACS document as a PDF
* ``stgh`` -- Builds the Self-Test Guide as an HTML file
* ``maniach`` -- Builds the MANIAC document as an HTML file
* ``maniacsh`` -- Builds the MANIACS document as an HTML file
* ``pdf`` -- Builds all three documents as PDFs
* ``html`` -- Builds all three documents as HTML files
* ``all`` (default) -- Builds all three documents as both PDFs and as
  HTML files
* ``clean`` -- Removes all ``.pdf`` and ``.html`` files

Note that the primary intended output format is PDF; HTML output is rough
at this time (July, 2015).

Styles and Formatting
=====================

The general style for the document is based on the Canonical whitepaper
template provided by Magdalena Mirowicz (magdalena.mirowicz@canonical.com)
in March of 2015. This template was not directly usable because it was in
ODF format and used a two-column layout. I've tried to stick close to the
ODF template in reStructuredText, but there are some differences:

* We're using a single-column layout.
* Our default font is a darker shade of gray.
* Our document uses letter-size paper rather than A4, since most of our
  readers are in the US.
* Headers and footers were replicated "by eye" and so are not precise
  conversions.
* The rst2pdf program creates a Contents list that is NOT capitalized
  (as in the sample template) and that provides hyperlinks to the
  referenced sections.

Editing Tips
============

Some tips when editing the .rst files:

* Use your favorite text editor.
* If necessary, you can insert page breaks manually; but use this feature
  only if absolutely necessary.
* Once a year, the images/cover-background.xcf file must be edited and
  re-exported to cover-background.png to update the copyright date that
  appears on the cover page.
